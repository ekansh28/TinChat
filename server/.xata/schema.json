{
  "tables": [
    {
      "name": "user_profiles",
      "columns": [
        { "name": "username", "type": "string", "unique": true },
        { "name": "display_name", "type": "string" },
        { "name": "avatar_url", "type": "string" },
        { "name": "banner_url", "type": "string" },
        { "name": "pronouns", "type": "string" },
        { "name": "status", "type": "string", "defaultValue": "offline" },
        { "name": "display_name_color", "type": "string", "defaultValue": "#667eea" },
        { "name": "display_name_animation", "type": "string", "defaultValue": "none" },
        { "name": "rainbow_speed", "type": "int", "defaultValue": "3" },
        { "name": "badges", "type": "multiple", "items": "string" },
        { "name": "biography", "type": "string" },
        { "name": "last_seen", "type": "datetime", "defaultValue": "now" },
        { "name": "is_online", "type": "bool", "defaultValue": "false" },
        { "name": "profile_complete", "type": "bool", "defaultValue": "false" },
        { "name": "profile_card_css", "type": "string" },
        { "name": "blocked_users", "type": "multiple", "items": "string" },
        { "name": "created_at", "type": "datetime", "defaultValue": "now" },
        { "name": "updated_at", "type": "datetime", "defaultValue": "now" },
        { "name": "force_migration_akshat_debug", "type": "string", "defaultValue": "debug" }
      ]
    },
    {
      "name": "friendships",
      "columns": [
        { "name": "user1_id", "type": "string" },
        { "name": "user2_id", "type": "string" },
        { "name": "status", "type": "string", "defaultValue": "active" },
        { "name": "initiated_by", "type": "string" },
        { "name": "created_at", "type": "datetime", "defaultValue": "now" },
        { "name": "updated_at", "type": "datetime", "defaultValue": "now" }
      ],
      "indexes": [
        { "columns": ["user1_id", "user2_id"], "unique": true }
      ]
    },
    {
      "name": "friend_requests",
      "columns": [
        { "name": "sender_id", "type": "string" },
        { "name": "receiver_id", "type": "string" },
        { "name": "message", "type": "string" },
        { "name": "status", "type": "string", "defaultValue": "pending" },
        { "name": "created_at", "type": "datetime", "defaultValue": "now" },
        { "name": "updated_at", "type": "datetime", "defaultValue": "now" }
      ],
      "indexes": [
        { "columns": ["sender_id", "receiver_id"], "unique": true }
      ]
    },
    {
      "name": "blocked_users",
      "columns": [
        { "name": "blocker_id", "type": "string" },
        { "name": "blocked_id", "type": "string" },
        { "name": "reason", "type": "string" },
        { "name": "created_at", "type": "datetime", "defaultValue": "now" }
      ],
      "indexes": [
        { "columns": ["blocker_id", "blocked_id"], "unique": true }
      ]
    },
    {
      "name": "chat_messages",
      "columns": [
        { "name": "sender_id", "type": "string" },
        { "name": "receiver_id", "type": "string" },
        { "name": "message", "type": "string" },
        { "name": "message_type", "type": "string", "defaultValue": "text" },
        { "name": "read_status", "type": "bool", "defaultValue": "false" },
        { "name": "created_at", "type": "datetime", "defaultValue": "now" }
      ],
      "indexes": [
        { "columns": ["sender_id"] },
        { "columns": ["receiver_id"] },
        { "columns": ["sender_id", "receiver_id", "created_at"] }
      ]
    }
  ]
}
